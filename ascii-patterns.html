<html>
<head>
<style>
body {
  font-family: monospace;
  font-size: 14pt;
}
textarea {
  font-size: 14pt;
  resize: none;
}
code {
  position: absolute;
  top: 0;
  left: 0;
  white-space: pre;
  overflow: hidden;
  width: 100%;
  height: 100%;
  z-index: -1;
}
</style>
</head>
<body>
<textarea id="pattern" name="pattern" rows="4" cols="8">
</textarea>
<div>
<code id="wallpaper">
</code>
</div>
<script>

const pattern = document.getElementById("pattern");
const wallpaper = document.getElementById("wallpaper");

function updateTapestry() {
  var lines = pattern.value.split("\n").filter(Boolean);

  if(lines.length <= 0)
    return;

  const maxLineLength = lines.map((line) => line.length).reduce((accu, value) => Math.max(accu, value), 0);
  lines = lines.map((line) => line + " ".repeat(maxLineLength - line.length));

  const columns = 180;
  const rows = 60;

  const N = Math.floor(columns / lines[0].length);

  let text = "\n";
  for(let row=0; row < rows; ++row) {
    for(let n=0; n < N; ++n) {
      text += lines[row % lines.length];
    }
    text += "\n";
  }

  wallpaper.innerHTML = text;
}

pattern.addEventListener("input", (event) => { 
  updateTapestry();
});


</script>
</body>
</html>